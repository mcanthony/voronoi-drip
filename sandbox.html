<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge; chrome=1" />
        <title>Sandbox</title>
        <style>

            .sandbox-start-all {
                display: block;
                text-align: center;
                padding: 20px;
            }

            .sandbox-voronoi-drip {
                float: left;
                border: 2px dotted #1DC9FF;
                margin: 10px;
                padding: 10px;
            }

            .sandbox-voronoi-drip canvas {
                margin: 10px;
            }

            .sandbox-start {
                display: block;
                text-align: center;
            }
        </style>
    </head>
    <body>
        <script src="src/display.js"></script>
        <script src="src/fluid-adder.js"></script>
        <script src="src/fluid-mover.js"></script>
        <script src="src/metrics.js"></script>
        <script src="src/pressure-solver.js"></script>
        <script src="src/overlap-solver.js"></script>
        <script src="src/fluid-network-simulation.js"></script>
        <script src="src/update-loop.js"></script>
        <script src="src/voronoi-drip.js"></script>
        <script src="src/sandbox.js"></script>

        <script>
            var sandbox = VoronoiDrip.Sandbox.create({
                container: document.body
            });
            sandbox.start();

           var network = [
                {
                    va: {x: 200, y: 0},
                    vb: {x: 200, y: 100},
                    ca: null,
                    cb: [1, 2],
                },{
                    va: {x: 300, y: 200},
                    vb: {x: 200, y: 100},
                    ca: [3, 4],
                    cb: [0, 2],
                },{
                    va: {x: 200, y: 100},
                    vb: {x: 0, y: 100},
                    ca: [0, 1],
                    cb: null,
                },{
                    va: {x: 300, y: 200},
                    vb: {x: 300, y: -100},
                    ca: [1, 4],
                    cb: null,
                },{
                    va: {x: 300, y: 200},
                    vb: {x: 200, y: 300},
                    ca: [1, 3],
                    cb: null,
                }
            ];
            sandbox.add({
                voronoiDrip: {
                width: 300,
                height: 300,
                pipeColour: "#eee",
                fluidColour: "#000",
                startVolume: 200,
                gravity: 10,
                timeout: 100,
                network: network
                },
                addFluid: {
                    volume: 200,
                    pipe: network[0],
                    vertex: network[0].va
                }
            });

            var network = [
                {
                    va: {x: 150, y: 200},
                    vb: {x: 250, y: 250},
                    ca: null,
                    cb: [1],
                },{
                    va: {x: 250, y: 250},
                    vb: {x: 250, y: 300},
                    ca: [0],
                    cb: null,
                }
            ];
            sandbox.add({
                voronoiDrip: {
                width: 300,
                height: 300,
                pipeColour: "#eee",
                fluidColour: "#000",
                startVolume: 200,
                gravity: 20,
                timeout: 500,
                network: network
                },
                addFluid: {
                    volume: 100,
                    pipe: network[0],
                    vertex: network[0].va
                }
            });

            var network = [
                {
                    va: {x: 250, y: 250},
                    vb: {x: 250, y: 300},
                    ca: [0],
                    cb: null,
                }
            ];
            sandbox.add({
                voronoiDrip: {
                width: 300,
                height: 300,
                pipeColour: "#eee",
                fluidColour: "#000",
                startVolume: 200,
                gravity: 10,
                timeout: 500,
                network: network
                },
                addFluid: {
                    volume: 10,
                    pipe: network[0],
                    vertex: network[0].va
                }
            });

            var network = [
                {
                    va: {x: 260, y: 240},
                    vb: {x: 250, y: 250},
                    ca: [4],
                    cb: [2, 3],
                },{
                    va: {x: 130, y: 300},
                    vb: {x: 150, y: 220},
                    ca: null,
                    cb: [2],
                },{
                    va: {x: 150, y: 220},
                    vb: {x: 250, y: 250},
                    ca: [1],
                    cb: [3],
                },{
                    va: {x: 250, y: 250},
                    vb: {x: 250, y: 300},
                    ca: [0, 2],
                    cb: null,
                },{
                    va: {x: 200, y: 0},
                    vb: {x: 260, y: 240},
                    ca: null,
                    cb: [0, 5],
                },{
                    va: {x: 260, y: 240},
                    vb: {x: 300, y: 250},
                    ca: [0, 4],
                    cb: null,
                }
            ];
            sandbox.add({
                voronoiDrip: {
                width: 300,
                height: 300,
                pipeColour: "#eee",
                fluidColour: "#000",
                startVolume: 200,
                gravity: 10,
                timeout: 100,
                network: network
                },
                addFluid: {
                    volume: 140,
                    pipe: network[4],
                    vertex: network[4].va
                }
            });

            var network = [
                {
                    va: {x: 50, y: 50},
                    vb: {x: 150, y: 250},
                    ca: null,
                    cb: [1],
                },{
                    va: {x: 250, y: 50},
                    vb: {x: 150, y: 250},
                    ca: null,
                    cb: [0],
                }
            ];
            sandbox.add({
                voronoiDrip: {
                width: 300,
                height: 300,
                pipeColour: "#eee",
                fluidColour: "#000",
                startVolume: 200,
                gravity: 90,
                timeout: 500,
                network: network
                },
                addFluid: {
                    volume: 140,
                    pipe: network[0],
                    vertex: network[0].va
                }
            });

            var network = [
                {
                    va: {x: 50, y: 50},
                    vb: {x: 150, y: 250},
                    ca: null,
                    cb: [1],
                },{
                    va: {x: 250, y: 50},
                    vb: {x: 150, y: 250},
                    ca: null,
                    cb: [0],
                }
            ];
            sandbox.add({
                voronoiDrip: {
                width: 300,
                height: 300,
                pipeColour: "#eee",
                fluidColour: "#000",
                startVolume: 200,
                gravity: 10,
                timeout: 10,
                network: network
                },
                addFluid: {
                    volume: 140,
                    pipe: network[0],
                    vertex: network[0].va
                }
            });

            var network = [
                {
                    va: {x: 50, y: 50},
                    vb: {x: 150, y: 250},
                    ca: null,
                    cb: null
                }
            ];
            sandbox.add({
                voronoiDrip: {
                width: 300,
                height: 300,
                pipeColour: "#eee",
                fluidColour: "#000",
                startVolume: 200,
                gravity: 100,
                timeout: 500,
                network: network
                },
                addFluid: {
                    volume: 140,
                    pipe: network[0],
                    vertex: network[0].va
                }
            });

            var network = [
                {
                    va: {x: 80, y: 50},
                    vb: {x: 80, y: 250},
                    ca: null,
                    cb: [1],
                },{
                    va: {x: 80, y: 250},
                    vb: {x: 120, y: 290},
                    ca: [0],
                    cb: [2],
                },{
                    va: {x: 120, y: 290},
                    vb: {x: 180, y: 290},
                    ca: [1],
                    cb: [3],
                },{
                    va: {x: 180, y: 290},
                    vb: {x: 220, y: 250},
                    ca: [2],
                    cb: [4],
                },{
                    va: {x: 220, y: 250},
                    vb: {x: 220, y: 50},
                    ca: [3],
                    cb: null,
                }
            ];
            sandbox.add({
                voronoiDrip: {
                width: 300,
                height: 300,
                pipeColour: "#eee",
                fluidColour: "#000",
                startVolume: 200,
                gravity: 10,
                timeout: 500,
                network: network
                },
                addFluid: {
                    volume: 300,
                    pipe: network[0],
                    vertex: network[0].va
                }
            });

            var network = [
                {
                    va: {x: 50, y: -100},
                    vb: {x: 50, y: 50},
                    ca: null,
                    cb: [1, 3],
                },{
                    va: {x: 50, y: 50},
                    vb: {x: 0, y: 100},
                    ca: [0],
                    cb: [2],
                },{
                    va: {x: 0, y: 100},
                    vb: {x: 50, y: 150},
                    ca: [1],
                    cb: [4, 5],
                },{
                    va: {x: 50, y: 50},
                    vb: {x: 100, y: 100},
                    ca: [0],
                    cb: [4],
                },{
                    va: {x: 100, y: 100},
                    vb: {x: 50, y: 150},
                    ca: [3],
                    cb: [2, 5],
                },{
                    va: {x: 50, y: 150},
                    vb: {x: 50, y: 200},
                    ca: [2, 4],
                    cb: null,
                }
            ];
            sandbox.add({
                voronoiDrip: {
                width: 300,
                height: 300,
                pipeColour: "#eee",
                fluidColour: "#000",
                startVolume: 200,
                gravity: 5,
                timeout: 5,
                network: network
                },
                addFluid: {
                    volume: 100,
                    pipe: network[0],
                    vertex: network[0].va
                }
            });

            var network = [
                {
                    va: {x: 50, y: -350},
                    vb: {x: 50, y: 150},
                    ca: null,
                    cb: [1, 2],
                },{
                    va: {x: 50, y: 150},
                    vb: {x: 0, y: 250},
                    ca: [0],
                    cb: [3],
                },{
                    va: {x: 50, y: 150},
                    vb: {x: 100, y: 250},
                    ca: [0],
                    cb: [3],
                },{
                    va: {x: 0, y: 250},
                    vb: {x: 100, y: 250},
                    ca: [1],
                    cb: [2],
                }
            ];
            sandbox.add({
                voronoiDrip: {
                width: 300,
                height: 300,
                pipeColour: "#eee",
                fluidColour: "#000",
                startVolume: 200,
                gravity: 5,
                timeout: 5,
                network: network
                },
                addFluid: {
                    volume: 350,
                    pipe: network[0],
                    vertex: network[0].va
                }
            });

            var network = [
                {
                    va: {x: -200, y: 0},
                    vb: {x: 50, y: 100},
                    ca: null,
                    cb: [1],
                },{
                    va: {x: 50, y: 100},
                    vb: {x: 50, y: 150},
                    ca: [0],
                    cb: [2, 3],
                },{
                    va: {x: 50, y: 150},
                    vb: {x: 0, y: 250},
                    ca: [1],
                    cb: [4],
                },{
                    va: {x: 50, y: 150},
                    vb: {x: 100, y: 250},
                    ca: [1],
                    cb: [4],
                },{
                    va: {x: 0, y: 250},
                    vb: {x: 100, y: 250},
                    ca: [2],
                    cb: [3],
                }
            ];
            sandbox.add({
                voronoiDrip: {
                width: 300,
                height: 300,
                pipeColour: "#eee",
                fluidColour: "#000",
                startVolume: 200,
                gravity: 5,
                timeout: 5,
                network: network
                },
                addFluid: {
                    volume: 350,
                    pipe: network[0],
                    vertex: network[0].va
                }
            });

            var network = [
                {
                    va: {x: -200, y: 0},
                    vb: {x: 50, y: 100},
                    ca: null,
                    cb: [1],
                },{
                    va: {x: 50, y: 100},
                    vb: {x: 50, y: 150},
                    ca: [0],
                    cb: [2, 3],
                },{
                    va: {x: 50, y: 150},
                    vb: {x: 0, y: 200},
                    ca: [1],
                    cb: [4],
                },{
                    va: {x: 50, y: 150},
                    vb: {x: 100, y: 200},
                    ca: [1],
                    cb: [5],
                },{
                    va: {x: 0, y: 200},
                    vb: {x: 50, y: 250},
                    ca: [2],
                    cb: [5],
                },{
                    va: {x: 100, y: 200},
                    vb: {x: 50, y: 250},
                    ca: [3],
                    cb: [4]
                }
            ];
            sandbox.add({
                voronoiDrip: {
                width: 300,
                height: 300,
                pipeColour: "#eee",
                fluidColour: "#000",
                startVolume: 200,
                gravity: 5,
                timeout: 5,
                network: network
                },
                addFluid: {
                    volume: 150,
                    pipe: network[0],
                    vertex: network[0].va
                }
            });
            network[4].fluids = [{
                volume: network[4].capacity - 4,
                position: 0
            }];
            network[5].fluids = [{
                volume: network[5].capacity - 4,
                position: 0
            }];

            var network = [
                {
                    va: {x: 0, y: 70},
                    vb: {x: 50, y: 100},
                    ca: null,
                    cb: [1],
                },{
                    va: {x: 50, y: 100},
                    vb: {x: 50, y: 150},
                    ca: [0],
                    cb: [2, 3],
                },{
                    va: {x: 50, y: 150},
                    vb: {x: 0, y: 200},
                    ca: [1],
                    cb: [4],
                },{
                    va: {x: 50, y: 150},
                    vb: {x: 100, y: 200},
                    ca: [1],
                    cb: [5],
                },{
                    va: {x: 0, y: 200},
                    vb: {x: 50, y: 250},
                    ca: [2],
                    cb: [5],
                },{
                    va: {x: 100, y: 200},
                    vb: {x: 50, y: 250},
                    ca: [3],
                    cb: [4]
                }
            ];
            sandbox.add({
                voronoiDrip: {
                width: 300,
                height: 300,
                pipeColour: "#eee",
                fluidColour: "#000",
                startVolume: 200,
                gravity: 5,
                timeout: 50,
                network: network
                },
                addFluid: {
                    volume: 50,
                    pipe: network[0],
                    vertex: network[0].va
                }
            });
            network[4].fluids = [{
                volume: network[4].capacity - 4,
                position: 0
            }];
            network[5].fluids = [{
                volume: network[5].capacity - 4,
                position: 0
            }];

            var network = [
                {
                    va: {x: 50, y: 0},
                    vb: {x: 100, y: 100},
                    ca: null,
                    cb: [2, 1],
                },{
                    va: {x: 30, y: 60},
                    vb: {x: 100, y: 100},
                    ca: null,
                    cb: [2, 0],
                },{
                    va: {x: 100, y: 100},
                    vb: {x: 100, y: 200},
                    ca: [0, 1],
                    cb: null,
                }
            ];
            sandbox.add({
                voronoiDrip: {
                width: 300,
                height: 300,
                pipeColour: "#eee",
                fluidColour: "#000",
                startVolume: 200,
                gravity: 5,
                timeout: 5,
                network: network
                },
                addFluid: {
                    volume: 50,
                    pipe: network[0],
                    vertex: network[0].va
                }
            });

            var network = [
                {
                    va: {x: 0, y: 0},
                    vb: {x: 100, y: 150},
                    ca: null,
                    cb: [2, 1],
                },{
                    va: {x: 200, y: 100},
                    vb: {x: 100, y: 150},
                    ca: null,
                    cb: [2, 0],
                },{
                    va: {x: 100, y: 150},
                    vb: {x: 100, y: 200},
                    ca: [0, 1],
                    cb: null,
                }
            ];
            sandbox.add({
                voronoiDrip: {
                width: 300,
                height: 300,
                pipeColour: "#eee",
                fluidColour: "#000",
                startVolume: 200,
                gravity: 5,
                timeout: 5,
                network: network
                },
                addFluid: {
                    volume: 100,
                    pipe: network[0],
                    vertex: network[0].va
                }
            });

            var network = [
                {
                    va: {x: 0, y: 0},
                    vb: {x: 100, y: 150},
                    ca: null,
                    cb: [2, 1],
                },{
                    va: {x: 130, y: 100},
                    vb: {x: 100, y: 150},
                    ca: null,
                    cb: [2, 0],
                },{
                    va: {x: 100, y: 150},
                    vb: {x: 90, y: 200},
                    ca: [0, 1],
                    cb: null,
                }
            ];
            sandbox.add({
                voronoiDrip: {
                width: 300,
                height: 300,
                pipeColour: "#eee",
                fluidColour: "#000",
                startVolume: 200,
                gravity: 5,
                timeout: 5,
                network: network
                },
                addFluid: {
                    volume: 50,
                    pipe: network[0],
                    vertex: network[0].va
                }
            });

            var network = [{
                "lSite":{
                    "x":180.0047509605065,
                    "y":52.26753291208297,
                    "voronoiId":0},
                "rSite":{
                    "x":336.72651753295213,
                    "y":59.91013930179179,
                    "voronoiId":1},
                "vb":{
                    "x":261.1008311922286,
                    "y":0},
                "va":{
                    "x":255.56722286914595,
                    "y":113.47396787060615},
                "ca":[1,2],
                "cb":[],
                "incline":-0.96897952874385,
                "capacity":113.60881218185781,
                "ra":9.84489764371925,
                "rb":0.1551023562807502,
                "fluids":[{
                        "volume":2.257362312853232,
                        "position":0
                    }]
            },{
                "lSite":{
                    "x":164.70202337950468,
                    "y":148.1067610438913,
                    "voronoiId":2},
                "rSite":{
                    "x":180.0047509605065,
                    "y":52.26753291208297,
                    "voronoiId":0},
                "vb":{
                    "x":17.017861907166036,
                    "y":75.38459719659828},
                "va":{
                    "x":255.56722286914595,
                    "y":113.47396787060615},
                "ca":[2,0],
                "cb":[3,4],
                "incline":-0.10079873115710525,
                "capacity":241.57110293599058,
                "ra":5.503993655785527,
                "rb":4.496006344214473,
                "fluids":[{
                        "volume":121.95549333811765,
                        "position":0,
                        "movedBy":0
                    }]
            },{
                "lSite":{
                    "x":336.72651753295213,
                    "y":59.91013930179179,
                    "voronoiId":1},
                "rSite":{
                    "x":164.70202337950468,
                    "y":148.1067610438913,
                    "voronoiId":2},
                "vb":{
                    "x":292.6297373129881,
                    "y":185.76313465865158},
                "va":{
                    "x":255.56722286914595,
                    "y":113.47396787060615},
                "ca":[0,1],
                "cb":[9,8],
                "incline":0.6983986044868388,
                "capacity":81.2364057046461,
                "ra":1.5080069775658056,
                "rb":8.491993022434194,
                "fluids":[{
                        "volume":1.0079873115710427,
                        "position":76.82384649355227
                    },{
                        "volume":1.0079873115710427,
                        "position":69.83986044868388
                    },{
                        "volume":1.0079873115710427,
                        "position":62.85587440381549
                    },{
                        "volume":1.0079873115710427,
                        "position":55.8718883589471
                    },{
                        "volume":1.0079873115710427,
                        "position":48.887902314078715
                    },{
                        "volume":1.0079873115710427,
                        "position":41.90391626921033
                    },{
                        "volume":1.0079873115710427,
                        "position":34.91993022434194
                    },{
                        "volume":1.0079873115710427,
                        "position":27.93594417947355
                    },{
                        "volume":1.0079873115710427,
                        "position":20.951958134605164
                    },{
                        "volume":1.0079873115710427,
                        "position":13.967972089736776
                    },{
                        "volume":1.0079873115710427,
                        "position":6.983986044868388
                    },{
                        "volume":1.5118187907902723,
                        "position":79.72458691385583
                    },{
                        "volume":1.0079873115710427,
                        "position":0
                }]
            },{
                "lSite":{
                    "x":164.70202337950468,
                    "y":148.1067610438913,
                    "voronoiId":2},
                "rSite":{
                    "x":38.3409452624619,
                    "y":238.6158772278577,
                    "voronoiId":3},
                "vb":{
                    "x":105.5604620441726,
                    "y":199.00019399302766},
                "va":{
                    "x":17.017861907166036,
                    "y":75.38459719659828},
                "ca":[1,4],
                "cb":[6,7],
                "incline":0.6042996772295,
                "capacity":152.05462114108613,
                "ra":1.9785016138525002,
                "rb":8.021498386147499,
                "fluids":[{
                        "volume":3.9245676272761614,
                        "position":148.13005351380997
                    }]
            },{
                "lSite":{
                    "x":38.3409452624619,
                    "y":238.6158772278577,
                    "voronoiId":3},
                "rSite":{
                    "x":180.0047509605065,
                    "y":52.26753291208297,
                    "voronoiId":0},
                "vb":{
                    "x":0,
                    "y":62.44745470968839},
                "va":{
                    "x":17.017861907166036,
                    "y":75.38459719659828},
                "ca":[3,1],
                "cb":[],
                "incline":-0.4138049620640547,
                "capacity":21.377026912505443,
                "ra":7.069024810320274,
                "rb":2.9309751896797263},
            {
                "lSite":{
                    "x":336.72651753295213,
                    "y":59.91013930179179,
                    "voronoiId":1},
                "rSite":{
                    "x":441.28138618543744,
                    "y":264.1879159491509,
                    "voronoiId":4},
                "vb":{
                    "x":500,
                    "y":105.23826032237588},
                "va":{
                    "x":321.5068622860838,
                    "y":196.59585621624984},
                "ca":[9,11],
                "cb":[],
                "incline":-0.30116210626268797,
                "capacity":200.51436491799643,
                "ra":6.50581053131344,
                "rb":3.49418946868656,
                "fluids":[{
                        "volume":38.41414051051561,
                        "position":0
                    }]
            },{
                "lSite":{
                    "x":164.70202337950468,
                    "y":148.1067610438913,
                    "voronoiId":2},
                "rSite":{
                    "x":115.93901563901454,
                    "y":276.33163274731487,
                    "voronoiId":5},
                "vb":{
                    "x":195.1587022274967,
                    "y":233.0737681877373},
                "va":{
                    "x":105.5604620441726,
                    "y":199.00019399302766},
                "ca":[3,7],
                "cb":[8,10],
                "incline":0.2313494862029557,
                "capacity":95.85850563382998,
                "ra":3.8432525689852213,
                "rb":6.156747431014779,
                "fluids":[{
                        "volume":95.85850563382998,
                        "position":6.217248937900877e-15
                    }]
            },{
                "lSite":{
                    "x":115.93901563901454,
                    "y":276.33163274731487,
                    "voronoiId":5},
                "rSite":{
                    "x":38.3409452624619,
                    "y":238.6158772278577,
                    "voronoiId":3},
                "vb":{
                    "x":29.204664615241754,
                    "y":356.0980026128575},
                "va":{
                    "x":105.5604620441726,
                    "y":199.00019399302766},
                "ca":[6,3],
                "cb":[12,14],
                "incline":0.7119822280212608,
                "capacity":174.67091708169568,
                "ra":1.4400888598936956,
                "rb":8.559911140106305,
                "fluids":[{
                        "volume":174.67091708169568,
                        "position":-7.105427357601002e-15
                    }]
            },{
                "lSite":{
                    "x":243.0721203563735,
                    "y":309.567597694695,
                    "voronoiId":6},
                "rSite":{
                    "x":164.70202337950468,
                    "y":148.1067610438913,
                    "voronoiId":2},
                "vb":{
                    "x":195.1587022274967,
                    "y":233.0737681877373},
                "va":{
                    "x":292.6297373129881,
                    "y":185.76313465865158},
                "ca":[9,2],
                "cb":[10,6],
                "incline":0.28767862953255774,
                "capacity":108.34619848227507,
                "ra":3.5616068523372113,
                "rb":6.438393147662788,
                "fluids":[{
                        "volume":108.34619848227507,
                        "position":-5.329070518200751e-15
                    }]
            },{
                "lSite":{
                    "x":336.72651753295213,
                    "y":59.91013930179179,
                    "voronoiId":1},
                "rSite":{
                    "x":243.0721203563735,
                    "y":309.567597694695,
                    "voronoiId":6},
                "vb":{
                    "x":321.5068622860838,
                    "y":196.59585621624984},
                "va":{
                    "x":292.6297373129881,
                    "y":185.76313465865158},
                "ca":[2,8],
                "cb":[5,11],
                "incline":0.22847393910864564,
                "capacity":30.842117356891077,
                "ra":3.8576303044567717,
                "rb":6.142369695543229,
                "fluids":[{
                        "volume":30.842117356891077,
                        "position":-1.3322676295501878e-15
                    }]
            },{
                "lSite":{
                    "x":243.0721203563735,
                    "y":309.567597694695,
                    "voronoiId":6},
                "rSite":{
                    "x":115.93901563901454,
                    "y":276.33163274731487,
                    "voronoiId":5},
                "vb":{
                    "x":163.2143246952559,
                    "y":355.2663357983656},
                "va":{
                    "x":195.1587022274967,
                    "y":233.0737681877373},
                "ca":[8,6],
                "cb":[13,12],
                "incline":0.8372139142159054,
                "capacity":126.29911652581067,
                "ra":0.813930428920473,
                "rb":9.186069571079527,
                "fluids":[{
                        "volume":126.29911652581067,
                        "position":7.105427357601002e-15
                    }]
            },{
                "lSite":{
                    "x":441.28138618543744,
                    "y":264.1879159491509,
                    "voronoiId":4},
                "rSite":{
                    "x":243.0721203563735,
                    "y":309.567597694695,
                    "voronoiId":6},
                "vb":{
                    "x":390.9707363769134,
                    "y":500},
                "va":{
                    "x":321.5068622860838,
                    "y":196.59585621624984},
                "ca":[5,9],
                "cb":[],
                "incline":0.8567164121701709,
                "capacity":311.25440441680047,
                "ra":0.7164179391491454,
                "rb":9.283582060850854,
                "fluids":[{
                        "volume":312.2976179557461,
                        "position":-1.0432135389456363
                    }]
            },{
                "lSite":{
                    "x":116.92236026283354,
                    "y":434.7817193483934,
                    "voronoiId":7},
                "rSite":{
                    "x":115.93901563901454,
                    "y":276.33163274731487,
                    "voronoiId":5},
                "vb":{
                    "x":29.204664615241754,
                    "y":356.0980026128575},
                "va":{
                    "x":163.2143246952559,
                    "y":355.2663357983656},
                "ca":[13,10],
                "cb":[14,7],
                "incline":0.00395082519196388,
                "capacity":134.0122407261787,
                "ra":4.980245874040181,
                "rb":5.019754125959819,
                "fluids":[{
                        "volume":134.0122407261787,
                        "position":7.993605777301127e-15
                    }]
            },{
                "lSite":{
                    "x":243.0721203563735,
                    "y":309.567597694695,
                    "voronoiId":6},
                "rSite":{
                    "x":116.92236026283354,
                    "y":434.7817193483934,
                    "voronoiId":7},
                "vb":{
                    "x":306.87451575143393,
                    "y":500},
                "va":{
                    "x":163.2143246952559,
                    "y":355.2663357983656},
                "ca":[10,12],
                "cb":[],
                "incline":0.5023696450562314,
                "capacity":203.9266634050806,
                "ra":2.488151774718843,
                "rb":7.511848225281157,
                "fluids":[{
                        "volume":204.16793559765472,
                        "position":-0.2412721925741188
                    }]
            },{
                "lSite":{
                    "x":116.92236026283354,
                    "y":434.7817193483934,
                    "voronoiId":7},
                "rSite":{
                    "x":38.3409452624619,
                    "y":238.6158772278577,
                    "voronoiId":3},
                "vb":{
                    "x":0,
                    "y":367.79700099743275},
                "va":{
                    "x":29.204664615241754,
                    "y":356.0980026128575},
                "ca":[12,7],
                "cb":[],
                "incline":0.24255977041012988,
                "capacity":31.46075330457057,
                "ra":3.7872011479493506,
                "rb":6.21279885205065,
                "fluids":[{
                        "volume":33.34612032150238,
                        "position":-1.8853670169318137
                    }]
            }];
            sandbox.add({
                voronoiDrip: {
                width: 500,
                height: 500,
                pipeColour: "#eee",
                fluidColour: "#000",
                startVolume: 200,
                gravity: 5,
                timeout: 5,
                network: network
                },
                addFluid: {}
            });

            var network = [{
                "lSite":{
                    "x":180.0047509605065,
                    "y":52.26753291208297,
                    "voronoiId":0},
                "rSite":{
                    "x":336.72651753295213,
                    "y":59.91013930179179,
                    "voronoiId":1},
                "vb":{
                    "x":261.1008311922286,
                    "y":0},
                "va":{
                    "x":255.56722286914595,
                    "y":113.47396787060615},
                "ca":[1,2],
                "cb":[],
                "incline":-0.96897952874385,
                "capacity":113.60881218185781,
                "ra":9.84489764371925,
                "rb":0.1551023562807502,
                "fluids":[{
                        "volume":2.257362312853232,
                        "position":0
                    }]
            },{
                "lSite":{
                    "x":164.70202337950468,
                    "y":148.1067610438913,
                    "voronoiId":2},
                "rSite":{
                    "x":180.0047509605065,
                    "y":52.26753291208297,
                    "voronoiId":0},
                "vb":{
                    "x":17.017861907166036,
                    "y":75.38459719659828},
                "va":{
                    "x":255.56722286914595,
                    "y":113.47396787060615},
                "ca":[2,0],
                "cb":[3,4],
                "incline":-0.10079873115710525,
                "capacity":241.57110293599058,
                "ra":5.503993655785527,
                "rb":4.496006344214473,
                "fluids":[{
                        "volume":121.95549333811765,
                        "position":0,
                        "movedBy":0
                    }]
            },{
                "lSite":{
                    "x":336.72651753295213,
                    "y":59.91013930179179,
                    "voronoiId":1},
                "rSite":{
                    "x":164.70202337950468,
                    "y":148.1067610438913,
                    "voronoiId":2},
                "vb":{
                    "x":292.6297373129881,
                    "y":185.76313465865158},
                "va":{
                    "x":255.56722286914595,
                    "y":113.47396787060615},
                "ca":[0,1],
                "cb":[9,8],
                "incline":0.6983986044868388,
                "capacity":81.2364057046461,
                "ra":1.5080069775658056,
                "rb":8.491993022434194,
                "fluids":[{
                        "volume":1.0079873115710427,
                        "position":76.82384649355227
                    },{
                        "volume":1.0079873115710427,
                        "position":69.83986044868388
                    },{
                        "volume":1.0079873115710427,
                        "position":62.85587440381549
                    },{
                        "volume":1.0079873115710427,
                        "position":55.8718883589471
                    },{
                        "volume":1.0079873115710427,
                        "position":48.887902314078715
                    },{
                        "volume":1.0079873115710427,
                        "position":41.90391626921033
                    },{
                        "volume":1.0079873115710427,
                        "position":34.91993022434194
                    },{
                        "volume":1.0079873115710427,
                        "position":27.93594417947355
                    },{
                        "volume":1.0079873115710427,
                        "position":20.951958134605164
                    },{
                        "volume":1.0079873115710427,
                        "position":13.967972089736776
                    },{
                        "volume":1.0079873115710427,
                        "position":6.983986044868388
                    },{
                        "volume":1.5118187907902723,
                        "position":79.72458691385583
                    },{
                        "volume":1.0079873115710427,
                        "position":0
                }]
            },{
                "lSite":{
                    "x":164.70202337950468,
                    "y":148.1067610438913,
                    "voronoiId":2},
                "rSite":{
                    "x":38.3409452624619,
                    "y":238.6158772278577,
                    "voronoiId":3},
                "vb":{
                    // removing this causes other bug
                    "x":105.5604620441726,
                    "y":199.00019399302766},
                "va":{
                    "x":17.017861907166036,
                    "y":75.38459719659828},
                "ca":[1,4],
                "cb":[6,7],
                "incline":0.6042996772295,
                "capacity":152.05462114108613,
                "ra":1.9785016138525002,
                "rb":8.021498386147499,
                "fluids":[{
                        "volume":3.9245676272761614,
                        "position":148.13005351380997
                    }]
            },{
                "lSite":{
                    "x":38.3409452624619,
                    "y":238.6158772278577,
                    "voronoiId":3},
                "rSite":{
                    "x":180.0047509605065,
                    "y":52.26753291208297,
                    "voronoiId":0},
                "vb":{
                    "x":0,
                    "y":62.44745470968839},
                "va":{
                    "x":17.017861907166036,
                    "y":75.38459719659828},
                "ca":[3,1],
                "cb":[],
                "incline":-0.4138049620640547,
                "capacity":21.377026912505443,
                "ra":7.069024810320274,
                "rb":2.9309751896797263},
            {
                "lSite":{
                    "x":336.72651753295213,
                    "y":59.91013930179179,
                    "voronoiId":1},
                "rSite":{
                    "x":441.28138618543744,
                    "y":264.1879159491509,
                    "voronoiId":4},
                "vb":{
                    "x":500,
                    "y":105.23826032237588},
                "va":{
                    "x":321.5068622860838,
                    "y":196.59585621624984},
                "ca":[9],
                "cb":[],
                "incline":-0.30116210626268797,
                "capacity":200.51436491799643,
                "ra":6.50581053131344,
                "rb":3.49418946868656,
                "fluids":[{
                        "volume":38.41414051051561,
                        "position":0
                    }]
            },{
                "lSite":{
                    "x":164.70202337950468,
                    "y":148.1067610438913,
                    "voronoiId":2},
                "rSite":{
                    "x":115.93901563901454,
                    "y":276.33163274731487,
                    "voronoiId":5},
                "vb":{
                    "x":195.1587022274967,
                    "y":233.0737681877373},
                "va":{
                    "x":105.5604620441726,
                    "y":199.00019399302766},
                "ca":[3,7],
                "cb":[8,10],
                "incline":0.2313494862029557,
                "capacity":95.85850563382998,
                "ra":3.8432525689852213,
                "rb":6.156747431014779,
                "fluids":[{
                        "volume":95.85850563382998,
                        "position":6.217248937900877e-15
                    }]
            },{
                "lSite":{
                    "x":115.93901563901454,
                    "y":276.33163274731487,
                    "voronoiId":5},
                "rSite":{
                    "x":38.3409452624619,
                    "y":238.6158772278577,
                    "voronoiId":3},
                "vb":{
                    "x":29.204664615241754,
                    "y":356.0980026128575},
                "va":{
                    "x":105.5604620441726,
                    "y":199.00019399302766},
                "ca":[6,3],
                "cb":[11],
                "incline":0.7119822280212608,
                "capacity":174.67091708169568,
                "ra":1.4400888598936956,
                "rb":8.559911140106305,
                "fluids":[{
                        "volume":174.67091708169568,
                        "position":-7.105427357601002e-15
                    }]
            },{
                "lSite":{
                    "x":243.0721203563735,
                    "y":309.567597694695,
                    "voronoiId":6},
                "rSite":{
                    "x":164.70202337950468,
                    "y":148.1067610438913,
                    "voronoiId":2},
                "vb":{
                    "x":195.1587022274967,
                    "y":233.0737681877373},
                "va":{
                    "x":292.6297373129881,
                    "y":185.76313465865158},
                "ca":[9,2],
                "cb":[10,6],
                "incline":0.28767862953255774,
                "capacity":108.34619848227507,
                "ra":3.5616068523372113,
                "rb":6.438393147662788,
                "fluids":[{
                        "volume":108.34619848227507,
                        "position":-5.329070518200751e-15
                    }]
            },{
                "lSite":{
                    "x":336.72651753295213,
                    "y":59.91013930179179,
                    "voronoiId":1},
                "rSite":{
                    "x":243.0721203563735,
                    "y":309.567597694695,
                    "voronoiId":6},
                "vb":{
                    "x":321.5068622860838,
                    "y":196.59585621624984},
                "va":{
                    "x":292.6297373129881,
                    "y":185.76313465865158},
                "ca":[2,8],
                "cb":[5],
                "incline":0.22847393910864564,
                "capacity":30.842117356891077,
                "ra":3.8576303044567717,
                "rb":6.142369695543229,
                "fluids":[{
                        "volume":30.842117356891077,
                        "position":-1.3322676295501878e-15
                    }]
            },{
                "lSite":{
                    "x":243.0721203563735,
                    "y":309.567597694695,
                    "voronoiId":6},
                "rSite":{
                    "x":115.93901563901454,
                    "y":276.33163274731487,
                    "voronoiId":5},
                "vb":{
                    "x":163.2143246952559,
                    "y":355.2663357983656},
                "va":{
                    "x":195.1587022274967,
                    "y":233.0737681877373},
                "ca":[8,6],
                "cb":[11],
                "incline":0.8372139142159054,
                "capacity":126.29911652581067,
                "ra":0.813930428920473,
                "rb":9.186069571079527,
                "fluids":[{
                        "volume":126.29911652581067,
                        "position":7.105427357601002e-15
                    }]
            },{
                "lSite":{
                    "x":116.92236026283354,
                    "y":434.7817193483934,
                    "voronoiId":7},
                "rSite":{
                    "x":115.93901563901454,
                    "y":276.33163274731487,
                    "voronoiId":5},
                "vb":{
                    "x":29.204664615241754,
                    "y":356.0980026128575},
                "va":{
                    "x":163.2143246952559,
                    "y":355.2663357983656},
                "ca":[10],
                "cb":[7],
                "incline":0.00395082519196388,
                "capacity":134.0122407261787,
                "ra":4.980245874040181,
                "rb":5.019754125959819,
                "fluids":[{
                        "volume":134.0122407261787,
                        "position":7.993605777301127e-15
                    }]
            }];
            sandbox.add({
                voronoiDrip: {
                width: 500,
                height: 500,
                pipeColour: "#eee",
                fluidColour: "#000",
                startVolume: 200,
                gravity: 5,
                timeout: 5,
                network: network
                },
                addFluid: {}
            });

            var network = [{"va":{"x":15,"y":8},"vb":{"x":128,"y":105},"ca":[],"cb":[1]},{"va":{"x":128,"y":105},"vb":{"x":186,"y":122},"ca":[0],"cb":[3,4]},{"va":{"x":222,"y":137},"vb":{"x":220,"y":87},"ca":[6],"cb":[3]},{"va":{"x":186,"y":122},"vb":{"x":220,"y":87},"ca":[1,4],"cb":[2]},{"va":{"x":190,"y":158},"vb":{"x":186,"y":122},"ca":[5,6],"cb":[1,3]},{"va":{"x":153,"y":150},"vb":{"x":190,"y":158},"ca":[],"cb":[4,6]},{"va":{"x":222,"y":137},"vb":{"x":190,"y":158},"ca":[2],"cb":[4,5]}];
            sandbox.add({
                voronoiDrip: {
                width: 300,
                height: 300,
                pipeColour: "#eee",
                fluidColour: "#000",
                startVolume: 200,
                gravity: 5,
                timeout: 5,
                network: network
                },
                addFluid: {
                    volume: 180,
                    pipe: network[0],
                    vertex: network[0].va
                }
            });

            var network = [
                {
                    "index": 0, "label": "top-right",
                    "va":{"x":138,"y":340},"vb":{"x":188,"y":374},"ca":[2,3],"cb":[1]
                },{
                    "index": 1, "label": "botto-right",
                    "va":{"x":193,"y":413},"vb":{"x":188,"y":374},"ca":[4],"cb":[0]
                },{
                    "index": 2, "label": "top-left",
                    "va":{"x":125,"y":401},"vb":{"x":138,"y":340},"ca":[4],"cb":[3,0]
                },{
                    "index": 3, "label": "top",
                    "va":{"x":135,"y":199},"vb":{"x":138,"y":340},"ca":[],"cb":[2,0]
                },{
                    "index": 4, "label": "bottom-left",
                    "va":{"x":193,"y":413},"vb":{"x":125,"y":401},"ca":[1],"cb":[2]
                }
            ];
            sandbox.add({
                voronoiDrip: {
                    width: 400,
                    height: 450,
                    network: network
                },
                addFluid: {
                    volume: 180
                }
            });

        </script>
    </body>
</html>